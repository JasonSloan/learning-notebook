# 1、安装

进入官网下载代码：<https://github.com/PlatformLab/NanoLog>

cd runtime目录，修改该目录下的GNUmakefile的第21行，改为CXX_ARGS=-std=c++17 -g -O3 -fPIC，因为很多时候要将程序编为动态库，而动态库必须是-fPIC (Position Independent Code)，所以编译NanoLog的时候增加-fPIC这个选项。

解压：cd runtime && make

# 2、与目标文件一起编译的选项

```C++
// 头文件搜索路径;库文件搜索路径;需要连接的库;启用多线程;将格式化字符串的warning当做error            
-INanoLog-master/runtime -LNanoLog-master/runtime/ -lNanoLog -lrt -pthread -Werror=format -std=c++17
```

# 3、API（日志等级分为4种：DEBUG, NOTICE, WARNING, and ERROR）

```C++
#include "NanoLogCpp17.h"

using namespace NanoLog::LogLevels;

int main(int argc, char** argv) {
    // 设置日志存储路径
    NanoLog::setLogFile("./mylog");

    // Optional optimization: pre-allocates thread-local data structures
    // needed by NanoLog. This can be invoked once per new
    // thread that will use the NanoLog system.
    NanoLog::preallocate();

    // Optional: Set the minimum LogLevel that log messages must have to be
    // persisted. Valid from least to greatest values are
    // DEBUG, NOTICE, WARNING, ERROR
    NanoLog::setLogLevel(NOTICE);

    NANO_LOG(DEBUG, "This message wont be logged since it is lower "
                        "than the current log level.");

    NANO_LOG(DEBUG, "Another message.");

    // All the standard printf specifiers (except %n) can be used
    char randomString[] = "Hello World";
    NANO_LOG(NOTICE, "A string, pointer, number, and float: '%s', %p, %d, %f",
                        randomString,
                        &randomString,
                        512,
                        3.14159);

    // Even with width and length specifiers
    NANO_LOG(NOTICE, "Shortend String: '%5s' and shortend float %0.2lf",
                     randomString,
                     3.14159);


    // 这句话应该放在一个空闲的阶段去做，IO还是有点耗时。Optional: Flush all pending log messages to disk，
    NanoLog::sync();

    // Optional: Gather statics generated by NanoLog
    // std::string stats = NanoLog::getStats();
    // printf("%s", stats.c_str());

    // // Optional: Prints NanoLog configuration parameters
    // NanoLog::printConfig();
}
```



# 4、查看日志

```C++
cd NanoLog-master/runtime
./decompressor decompress mylogfile
```

